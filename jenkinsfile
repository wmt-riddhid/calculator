pipeline{
    agent any
    environment {
        CI = 'true'
    }
    tools {nodejs "node"}
    stages {
        stage('check') {
            steps {
                sh 'npm config ls'
            }
        }
        stage('build') {
            steps {
                sh 'npm install'
                sh 'npm run build'
                archiveArtifacts artifacts: 'build/'
            }
        }
        
        stage('deliver'){
            
            {
        "name": "Deploy to Netlify",
        "uses": "jsmrcaga/action-netlify-deploy@v1.1.0",
        "with": {
            "NETLIFY_AUTH_TOKEN": "${{ secrets.NETLIFY_AUTH_TOKEN }}",
            "NETLIFY_SITE_ID": "${{ secrets.NETLIFY_SITE_ID}}",
            "build_command": "echo hello",
            "install_command": "echo hello",
            "NETLIFY_DEPLOY_TO_PROD": true
        }
    }
        }
    }
}
